# Data structures for IRS

## Clusters

A spatially-defined and contiguous group of Tasks (and by reference, Structures).

Example a single Cluster: 

```js

{
    id: '123123',
    name: 'Something autogenerated from Location Attrs...',
    location: {
        country: 'swz',
        region: 'Hhhohho',
        locality: '...',
        inkhundla: '...',
        village: "..." // String or null
    },
    cluster_collection_id: '', // Some kind of timestamp to ensure this group of Clusters are kept together, not a Kinto collection
    polygon: {}, // GeoJSON object,
    task_ids: [], // array of Tasks (incl. only Structure ID)
    spatial_entity_centroids: {} // FeatureCollection of SpatialEntities with Ids and centroids
}

```


## Tasks

A Task is an action made on a spatial entity. For the sake of IRS a task is linked to a Structure. It does not contain any spatial data, just a reference to a Structure. 

Structures can be references by multiple Tasks.

Example:

```js
{
    id: '0e234567-e537-4d4e-b351-9f68e373e526',
    structure_id: '4d9690b7-2e19-47ce-ac89-d41ac653b6d0',
    type: 'irs_record',    
    attributes: {
        // information collected from the form
        status: 'unvisited'
    },
    coordinates: { // Point location of Structure centroid
        lat: -26.123,
        lng: 32.456
    }
}
```

## Structure

A structure contains a GeoJSON object and an OSM id. They are static objects and can not be edited. 

Example:

```js
{
      "type": "FeatureCollection",
      "features": [
        {
          "type": "Feature",
          "properties": {
            osm_id: '4d9690b7-2e19-47ce-ac89-d41ac653b6d0',
          },
          "geometry": {
            "type": "Polygon",
            "coordinates": [
              [
                [
                  31.139424741268154,
                  -26.32187354625055
                ],
                [
                  31.139368414878845,
                  -26.322207717074644
                ],
                [
                  31.139757335186,
                  -26.32207068311233
                ],
                [
                  31.139424741268154,
                  -26.32187354625055
                ]
              ]
            ]
          }
        }
      ]
   }
```


## Area (formal area, locality)

Example:

```js
{
  "type": "Feature",
  "properties": {
    "area_id": '...' // unique identifier for an area
  },
  "geometry": {
    "type": "Polygon",
    "coordinates": [
      [
        [
          31.139424741268154,
          -26.32187354625055
        ],
        [
          31.139368414878845,
          -26.322207717074644
        ],
        [
          31.139757335186,
          -26.32207068311233
        ],
        [
          31.139424741268154,
          -26.32187354625055
        ]
      ]
    ]
  }
}
```

